# –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-14
**–î–ª—è –∫–æ–≥–æ:** –î–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–æ–≤, DevOps –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤ –∏ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π

---

## üéØ –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è

–ü–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–æ–ª–∂–Ω–∞ **–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è**, —á—Ç–æ–±—ã:
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ù–µ —Ç–µ—Ä—è—Ç—å –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û—Å—Ç–∞–≤–∞—Ç—å—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π
- –ù–µ –≤–∑—Ä—ã–≤–∞—Ç—å—Å—è –≤ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Ü–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

### –¢–µ–∫—É—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (MVP)

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 10-50 –∞–∫—Ç–∏–≤–Ω—ã—Ö
–ü—Ä–æ–µ–∫—Ç–æ–≤: ~100
–î–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –¥–µ–Ω—å: ~200
–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á: 5-10
```

### –¶–µ–ª–µ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (—á–µ—Ä–µ–∑ 1 –≥–æ–¥)

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 500-1000 –∞–∫—Ç–∏–≤–Ω—ã—Ö
–ü—Ä–æ–µ–∫—Ç–æ–≤: ~5,000
–î–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –¥–µ–Ω—å: ~2,000
–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á: 100-200
```

### SLA (Service Level Agreement)

| –û–ø–µ—Ä–∞—Ü–∏—è | –¶–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è | –ú–∞–∫—Å. –≤—Ä–µ–º—è | –î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ |
|----------|---------------|-------------|------------------------|
| –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | 2-5 —Å–µ–∫ | 15 —Å–µ–∫ | –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ |
| –ê–Ω–∞–ª–∏–∑ –†–î | 30-60 —Å–µ–∫ | 120 —Å–µ–∫ | Retry —Å —É–ø—Ä–æ—â—ë–Ω–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ê–û–°–† | 10-20 —Å–µ–∫ | 60 —Å–µ–∫ | Fallback –∫ —à–∞–±–ª–æ–Ω—É –±–µ–∑ LLM |
| –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | 2-5 –º–∏–Ω | 10 –º–∏–Ω | –ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –ø–æ–∏—Å–∫, –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Ä—É—á–Ω—É—é |
| –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞ | 5-10 —Å–µ–∫ | 30 —Å–µ–∫ | –£–≤–µ–¥–æ–º–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |

**Uptime:** 99.5% (–¥–æ–ø—É—Å—Ç–∏–º—ã–π downtime: ~3.5 —á–∞—Å–∞ –≤ –º–µ—Å—è—Ü)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

### –≠—Ç–∞–ø 1: –ú–æ–Ω–æ–ª–∏—Ç (MVP) ‚Äî 0-100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –û–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä (8 CPU, 16 GB RAM)         ‚îÇ
‚îÇ  ‚îú‚îÄ FastAPI (backend)                   ‚îÇ
‚îÇ  ‚îú‚îÄ Celery Worker (1 –ø—Ä–æ—Ü–µ—Å—Å)           ‚îÇ
‚îÇ  ‚îú‚îÄ PostgreSQL                          ‚îÇ
‚îÇ  ‚îú‚îÄ Redis                               ‚îÇ
‚îÇ  ‚îî‚îÄ Nginx (frontend static files)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–°—Ç–æ–∏–º–æ—Å—Ç—å: ~$50-100/–º–µ—Å
```

**–ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ —Ä–æ—Å—Ç–µ:**
- ‚ùå –û–¥–∏–Ω Celery Worker –Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π
- ‚ùå PostgreSQL –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–º–µ–¥–ª–∏—Ç—Å—è
- ‚ùå –ù–µ—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (—É–ø–∞–ª —Å–µ—Ä–≤–µ—Ä ‚Üí –≤—Å—ë —É–ø–∞–ª–æ)

---

### –≠—Ç–∞–ø 2: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî 100-300 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:** –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–æ—â–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ú–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (16 CPU, 32 GB RAM)      ‚îÇ
‚îÇ  ‚îú‚îÄ FastAPI (backend)                   ‚îÇ
‚îÇ  ‚îú‚îÄ Celery Workers (5 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)        ‚îÇ
‚îÇ  ‚îú‚îÄ PostgreSQL                          ‚îÇ
‚îÇ  ‚îú‚îÄ Redis                               ‚îÇ
‚îÇ  ‚îî‚îÄ Nginx                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–°—Ç–æ–∏–º–æ—Å—Ç—å: ~$200-300/–º–µ—Å
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –ë—ã—Å—Ç—Ä–æ
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–¥

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ï—Å—Ç—å –ø—Ä–µ–¥–µ–ª (–Ω–µ–ª—å–∑—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å CPU)
- ‚ùå –î–æ—Ä–æ–≥–æ (—Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞—Å—Ç—ë—Ç –Ω–µ–ª–∏–Ω–µ–π–Ω–æ)
- ‚ùå –í—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

---

### –≠—Ç–∞–ø 3: –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî 300-1000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:** –†–∞–∑–¥–µ–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   LOAD BALANCER (Nginx)                   ‚îÇ
‚îÇ          –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ           ‚îÇ           ‚îÇ
         ‚ñº           ‚ñº           ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇBackend ‚îÇ  ‚îÇBackend ‚îÇ  ‚îÇBackend ‚îÇ
    ‚îÇ   #1   ‚îÇ  ‚îÇ   #2   ‚îÇ  ‚îÇ   #3   ‚îÇ
    ‚îÇFastAPI ‚îÇ  ‚îÇFastAPI ‚îÇ  ‚îÇFastAPI ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ           ‚îÇ           ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  PostgreSQL Cluster  ‚îÇ
         ‚îÇ  (Master + 2 Replicas)‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇCelery  ‚îÇ  ‚îÇCelery  ‚îÇ  ‚îÇCelery  ‚îÇ  ‚îÇCelery  ‚îÇ
    ‚îÇWorker#1‚îÇ  ‚îÇWorker#2‚îÇ  ‚îÇWorker#3‚îÇ  ‚îÇWorker#4‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ   Redis   ‚îÇ
              ‚îÇ  Cluster  ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$500-1000/–º–µ—Å

**–ü–ª—é—Å—ã:**
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–µ—Ä–≤–µ—Ä—ã –ø–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞
- ‚úÖ –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (–æ–¥–∏–Ω —É–ø–∞–ª ‚Üí –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç)
- ‚úÖ –°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞—Å—Ç—ë—Ç –ª–∏–Ω–µ–π–Ω–æ

---

## ‚öôÔ∏è –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. Backend (FastAPI)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å FastAPI –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —á–µ—Ä–µ–∑ Gunicorn
gunicorn main:app \
  --workers 4 \
  --worker-class uvicorn.workers.UvicornWorker \
  --bind 0.0.0.0:8000
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (Kubernetes):**
```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: backend-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: backend
  minReplicas: 2
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
```

---

### 2. Celery Workers

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ Celery Workers

```bash
# Worker #1 (–æ–±—â–∏–µ –∑–∞–¥–∞—á–∏)
celery -A app.celery worker --concurrency=4 --loglevel=info

# Worker #2 (—Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑ –†–î)
celery -A app.celery worker --concurrency=2 -Q rd_analysis

# Worker #3 (—Ç–æ–ª—å–∫–æ –ø–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
celery -A app.celery worker --concurrency=5 -Q document_search
```

**–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```python
from celery import Celery
from kombu import Queue

app = Celery('tasks')

# –†–∞–∑–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á
app.conf.task_routes = {
    'tasks.analyze_rd': {'queue': 'rd_analysis'},
    'tasks.search_document': {'queue': 'document_search'},
    'tasks.generate_aosr': {'queue': 'aosr_generation'},
}

# –ê–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥: 1-10 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
app.conf.worker_autoscale = (10, 1)
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—á–µ—Ä–µ–¥–∏:**
```python
from celery.app.control import Inspect

inspect = Inspect(app)

# –°–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á?
active_tasks = inspect.active()
print(f"–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á: {len(active_tasks)}")

# –°–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏?
reserved_tasks = inspect.reserved()
print(f"–í –æ—á–µ—Ä–µ–¥–∏: {len(reserved_tasks)}")

# –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å > 50 –∑–∞–¥–∞—á ‚Üí –¥–æ–±–∞–≤–∏—Ç—å Worker
if len(reserved_tasks) > 50:
    scale_up_workers()
```

---

### 3. PostgreSQL

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π

#### 3.1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

```sql
-- –ü–ª–æ—Ö–æ (–º–µ–¥–ª–µ–Ω–Ω–æ)
SELECT * FROM documents WHERE ocr_text LIKE '%—Ç—Ä—É–±–∞%';

-- –•–æ—Ä–æ—à–æ (–±—ã—Å—Ç—Ä–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫)
CREATE INDEX idx_documents_ocr_text_fts
ON documents USING GIN(to_tsvector('russian', ocr_text));

SELECT * FROM documents
WHERE to_tsvector('russian', ocr_text) @@ to_tsquery('russian', '—Ç—Ä—É–±–∞');
```

#### 3.2. –†–µ–ø–ª–∏–∫–∞—Ü–∏—è (Read Replicas)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Master DB      ‚îÇ  ‚Üê –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∑–∞–ø–∏—Å—å (INSERT, UPDATE)
‚îÇ  (–ì–ª–∞–≤–Ω–∞—è –ë–î)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ –†–µ–ø–ª–∏—Ü–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚ñº    ‚ñº    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇRep#1‚îÇ ‚îÇRep#2‚îÇ ‚îÇRep#3‚îÇ  ‚Üê –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —á—Ç–µ–Ω–∏–µ (SELECT)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–æ–¥ (SQLAlchemy):**
```python
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

# Master –¥–ª—è –∑–∞–ø–∏—Å–∏
master_engine = create_engine('postgresql://master:5432/pto_db')
MasterSession = sessionmaker(bind=master_engine)

# Replicas –¥–ª—è —á—Ç–µ–Ω–∏—è
replica_engine = create_engine('postgresql://replica:5432/pto_db')
ReplicaSession = sessionmaker(bind=replica_engine)

# –í –∫–æ–¥–µ
def get_projects():
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º Replica –¥–ª—è —á—Ç–µ–Ω–∏—è
    session = ReplicaSession()
    return session.query(Project).all()

def create_project(data):
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º Master –¥–ª—è –∑–∞–ø–∏—Å–∏
    session = MasterSession()
    session.add(Project(**data))
    session.commit()
```

#### 3.3. –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (Partitioning)

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞–±–ª–∏—Ü–∞ `documents` —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è (–º–∏–ª–ª–∏–æ–Ω—ã –∑–∞–ø–∏—Å–µ–π)

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–±–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø–æ –¥–∞—Ç–∞–º

```sql
-- –°–æ–∑–¥–∞—ë–º –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
CREATE TABLE documents (
    id SERIAL,
    project_id INT,
    filename TEXT,
    uploaded_at TIMESTAMP,
    ...
) PARTITION BY RANGE (uploaded_at);

-- –ü–∞—Ä—Ç–∏—Ü–∏—è –∑–∞ 2024 –≥–æ–¥
CREATE TABLE documents_2024 PARTITION OF documents
FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');

-- –ü–∞—Ä—Ç–∏—Ü–∏—è –∑–∞ 2025 –≥–æ–¥
CREATE TABLE documents_2025 PARTITION OF documents
FOR VALUES FROM ('2025-01-01') TO ('2026-01-01');
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ 10-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ (PostgreSQL –∏—â–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –Ω—É–∂–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏)

---

### 4. Redis (–ö—ç—à –∏ –æ—á–µ—Ä–µ–¥—å)

**–ü—Ä–æ–±–ª–µ–º–∞:** Redis —Ö—Ä–∞–Ω–∏—Ç –≤—Å—ë –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ ‚Üí –º–æ–∂–µ—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è –ø–∞–º—è—Ç—å

#### 4.1. Redis Cluster

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Redis Cluster                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ Node #1 ‚îÇ  ‚îÇ Node #2 ‚îÇ  ‚îÇ Node #3 ‚îÇ‚îÇ
‚îÇ  ‚îÇ (Master)‚îÇ  ‚îÇ (Master)‚îÇ  ‚îÇ (Master)‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ       ‚îÇ            ‚îÇ            ‚îÇ     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ Replica ‚îÇ  ‚îÇ Replica ‚îÇ  ‚îÇ Replica‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```python
from redis.cluster import RedisCluster

redis_cluster = RedisCluster(
    startup_nodes=[
        {"host": "redis-node-1", "port": 6379},
        {"host": "redis-node-2", "port": 6379},
        {"host": "redis-node-3", "port": 6379},
    ],
    decode_responses=True
)

# –¢–µ–ø–µ—Ä—å Redis –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ —É–∑–ª–∞–º
redis_cluster.set("key", "value")
```

#### 4.2. –ü–æ–ª–∏—Ç–∏–∫–∞ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è (Eviction Policy)

```bash
# redis.conf
maxmemory 2gb
maxmemory-policy allkeys-lru  # –£–¥–∞–ª—è–µ—Ç —Å–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏
```

---

### 5. Object Storage (—Ñ–∞–π–ª—ã)

**–ü—Ä–æ–±–ª–µ–º–∞:** –§–∞–π–ª–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CDN (Content Delivery Network)

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí CDN (Cloudflare) ‚Üí Object Storage (Yandex Cloud)
             ‚Üë
        –ö—ç—à —Ñ–∞–π–ª–æ–≤ (–±—ã—Å—Ç—Ä–æ)
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –§–∞–π–ª—ã –æ—Ç–¥–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ (–∏–∑ –∫—ç—à–∞ CDN)
- ‚úÖ –°–Ω–∏–∂–∞–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Object Storage
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö

**–ö–æ–¥:**
```python
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ–∞–π–ª —á–µ—Ä–µ–∑ CDN
def get_file_url(file_path):
    # –í–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ S3
    # return f"https://storage.yandexcloud.net/{bucket}/{file_path}"

    # –ò—Å–ø–æ–ª—å–∑—É–µ–º CDN
    return f"https://cdn.pto-platform.com/{file_path}"
```

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

| –ù–∞–≥—Ä—É–∑–∫–∞ | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å | –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
|----------|-------------|---------------|----------------------------|
| 10-50 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –ú–æ–Ω–æ–ª–∏—Ç (1 —Å–µ—Ä–≤–µ—Ä) | $50-100 | $2-10 |
| 100-300 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ (1 –º–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä) | $200-300 | $0.60-3 |
| 300-1000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ (–∫–ª–∞—Å—Ç–µ—Ä) | $500-1000 | $0.50-3 |

**–í—ã–≤–æ–¥:** –ü—Ä–∏ —Ä–æ—Å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **–ø–∞–¥–∞–µ—Ç** (—ç—Ñ—Ñ–µ–∫—Ç –º–∞—Å—à—Ç–∞–±–∞)

---

## üö¶ –£–∑–∫–∏–µ –º–µ—Å—Ç–∞ (Bottlenecks)

### 1. OpenAI API

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ (Rate Limit)

**–õ–∏–º–∏—Ç—ã:**
- GPT-4o: 10,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω (Tier 3)
- –ï—Å–ª–∏ –ø—Ä–µ–≤—ã—Å–∏—Ç—å ‚Üí –æ—à–∏–±–∫–∞ `429 Too Many Requests`

**–†–µ—à–µ–Ω–∏–µ:**
```python
import openai
from tenacity import retry, stop_after_attempt, wait_exponential

@retry(
    stop=stop_after_attempt(3),
    wait=wait_exponential(multiplier=1, min=4, max=60)
)
def call_openai_with_retry(prompt):
    try:
        response = openai.chat.completions.create(
            model="gpt-4o",
            messages=[{"role": "user", "content": prompt}],
        )
        return response
    except openai.RateLimitError:
        # –ñ–¥—ë–º –∏ –ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞
        raise
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é LLM (LLaMA, Mistral) –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á

---

### 2. –ü–∞—Ä—Å–∏–Ω–≥ PDF

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ–ª—å—à–∏–µ PDF (200+ —Å—Ç—Ä–∞–Ω–∏—Ü) –ø–∞—Ä—Å—è—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:** –†–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü

```python
from concurrent.futures import ThreadPoolExecutor
import PyMuPDF

def extract_text_parallel(pdf_path):
    doc = fitz.open(pdf_path)
    total_pages = len(doc)

    def extract_page(page_num):
        page = doc[page_num]
        return page.get_text()

    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
    with ThreadPoolExecutor(max_workers=10) as executor:
        pages_text = list(executor.map(extract_page, range(total_pages)))

    return "\n".join(pages_text)
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

```python
from prometheus_client import Counter, Histogram, Gauge

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
documents_processed = Counter('documents_processed_total', 'Total documents processed')

# –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
task_duration = Histogram('task_duration_seconds', 'Task execution time', ['task_type'])

# –†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ Celery
celery_queue_size = Gauge('celery_queue_size', 'Number of tasks in queue', ['queue_name'])

# –í –∫–æ–¥–µ
@celery_app.task
def analyze_rd(document_id):
    with task_duration.labels(task_type='analyze_rd').time():
        # –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–¥–∞—á—É
        result = perform_analysis(document_id)
        documents_processed.inc()
        return result
```

### –ê–ª–µ—Ä—Ç—ã (Grafana + Prometheus)

```yaml
# alert.rules.yml
groups:
  - name: platform_alerts
    rules:
      # –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –±–æ–ª—å—à–µ 100 –∑–∞–¥–∞—á
      - alert: HighCeleryQueue
        expr: celery_queue_size > 100
        for: 5m
        annotations:
          summary: "–û—á–µ—Ä–µ–¥—å Celery –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞"
          description: "–í –æ—á–µ—Ä–µ–¥–∏ {{ $value }} –∑–∞–¥–∞—á, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Workers"

      # –ï—Å–ª–∏ –≤—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞ > 2 –º–∏–Ω—É—Ç
      - alert: SlowRDAnalysis
        expr: task_duration_seconds{task_type="analyze_rd"} > 120
        for: 1m
        annotations:
          summary: "–ê–Ω–∞–ª–∏–∑ –†–î —Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω—ã–π"
```

---

## üéØ –ü–ª–∞–Ω –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è (Roadmap)

### –ö–≤–∞—Ä—Ç–∞–ª 1 (0-3 –º–µ—Å—è—Ü–∞)
- ‚úÖ –ú–æ–Ω–æ–ª–∏—Ç (1 —Å–µ—Ä–≤–µ—Ä)
- ‚úÖ 1 Celery Worker
- ‚úÖ PostgreSQL –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ

### –ö–≤–∞—Ä—Ç–∞–ª 2 (3-6 –º–µ—Å—è—Ü–µ–≤)
- üìç –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–º–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
- üìç 3-5 Celery Workers
- üìç –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î

### –ö–≤–∞—Ä—Ç–∞–ª 3 (6-9 –º–µ—Å—è—Ü–µ–≤)
- üìç –†–∞–∑–¥–µ–ª–∏—Ç—å Backend –∏ –ë–î –Ω–∞ —Ä–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
- üìç PostgreSQL —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è (1 Master + 2 Replicas)
- üìç Redis Cluster

### –ö–≤–∞—Ä—Ç–∞–ª 4 (9-12 –º–µ—Å—è—Ü–µ–≤)
- üìç –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (3+ Backend —Å–µ—Ä–≤–µ—Ä–æ–≤)
- üìç Load Balancer
- üìç Kubernetes –¥–ª—è –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥–∞
- üìç CDN –¥–ª—è —Ñ–∞–π–ª–æ–≤

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏

**–í–∞–∂–Ω–æ:** –ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å!

–ß–∏—Ç–∞–π—Ç–µ: [05-security-architecture.md](05-security-architecture.md)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-14
